= content_for(:title, "Admin - objects")

%div{'ng-controller'=>'indexObjectCtrl',  'ng-init'=>"init(#{@posts.to_json}, '/admin/blog/posts')", style:"padding:30px;padding-bottom:0px;"}
  .angular
    .form-inline
      .form-group
        .input-group
          .input-group-addon
            %i.fa.fa-search
          %input#input-search{"ng-model" => "buscar.$", :placeholder => t("admin.actions.search"), :type => "text"} 
    .alert{class: 'alert-{{statusAlert}}', 'ng-show'=>"alert==true"} 
      %strong Admin:    
      {{msnAlert}}
      %button.close{"aria-hidden" => "true", "data-dismiss" => "alert", :type => "button"} &times;
    = render 'layouts/admin/messages'

    %br/
    .panel.panel-default
      .panel-heading
        = link_to new_post_path, class: "btn btn-default", title: t("admin.buttons.new") do
          %i.fa.fa-plus-circle
        %button.btn.btn-default{"ng-click" => "refresh()", :title => t("admin.buttons.refresh") }
          %i.fa.fa-refresh#icon-refresh
        = link_to new_category_path, class: "btn btn-default", title: "Añadir categoría" do
          %i.fa.fa-tags
        %a.btn.btn-default{"ng-show" => "objects.length", "ng-click" => "allSelected(objects)", :title => t("admin.buttons.select_all") }
          %i.fa.fa-check-square-o
        %button#btn-delete.btn.btn-default{class: "btn-{{btnDelete}}", "ng-click" => "destroy()", :title => t("admin.buttons.trash") }
          %i.fa.fa-trash-o
        %button.btn.btn-default.pull-right.hidden-xs{'disabled'=>"", style:"color:#000"}
          Página {{page}}
        %button.btn.btn-default.pull-right{"ng-click" => "nextList();"}
          %i.fa.fa-arrow-right
        %button.btn.btn-default.pull-right{"ng-click" => "lastList();"}
          %i.fa.fa-arrow-left
      .panel-body
        %table{style: "width:100%"}
          %tbody
            %tr{ class: "select-{{object.checked}}", "ng-click" => "show(object.id)", :id => "row-{{object.id}}", "ng-repeat" => "object in objects | filter:buscar | interval:interval_a:interval_b "}
              %td.messages{width: "1px;"}
                %input.check{:id => "check-{{object.id}}", "ng-click" => "selected(object.id); $event.stopPorpagation();", :type => "checkbox", "ng-model" => "object.checked"}
              %td.messages {{object.title}}
              %td.messages.hidden-xs {{ object.autor }}
              %td.messages.hidden-xs {{ object.category_name }}
              %td.messages.hidden-xs {{ object.public }}
              %td.messages
                = link_to "{{show_path(object.id)}}", title: t('admin.actions.show') do
                  %i.fa.fa-exclamation-circle
                = link_to "{{edit_path(object.id)}}", title: t('admin.actions.edit') do
                  %i.fa.fa-edit
                = link_to "{{destroy_path(object.id)}}", title: t('admin.actions.delete'), :method => :delete, :data => { :confirm => '¿Estas seguro de querer eliminar este usuario?' } do
                  %i.fa.fa-trash-o
            %tr{"ng-show" => "!objects.length"}
              %td{:style => "width:100%"}
                - unless @posts.empty?
                  %center
                    %i.fa.fa-spinner.fa-spin{ style: "font-size:30px; margin-bottom:10px;"}
                    %br/
                    Cargando
                - else
                  %center
                    No hay registros

              
      .panel-footer
        %center 
          %strong {{objects.length}}
          Posts
