= simple_form_for(@post) do |f|
	.container_form	
		.title_form
			Datos de usuario
		.form-p
			.input#title{ class: "#{@post.title.blank? ? 'input-false' : 'input-great' }" }
				= f.input :title, label: 'Título', input_html: { class: "input_form", id: "input-title", "ng-focus" => "inputFocus('title')", "ng-blur" => "inputBlur('title')" }
			= f.input :content, label: false, input_html: { class: "tinymce", style: "height: 200px;" }
			
			%div{ "ng-controller" => "formCategoryCtrl", 'ng-init'=> "#{params[:action] == 'new' ? 'init()' : "init(#{@post.category_id}, #{@post.id}, #{@post.to_json}, #{@subcategories.to_json})"}" }
				.input#category{ class: "#{@post.title.blank? ? 'input-false' : 'input-great' }" }
					= f.association :category, label: "Categoría", collection: @categories, input_html: { class: "input_form", "ng-click" => "selectAction()", "ng-model" => "post.category_id", id: "input-category", "ng-focus" => "inputFocus('category')", "ng-blur" => "inputBlur('category')" }
						
				.input#post_subcategory_id{ "ng-if" => "obj.subcategories", class: "#{@post.title.blank? ? 'input-false' : 'input-great' }" }
					.control-group.select
						%label.select.control-label{ for: "input-post_subcategory_id"} Subcategoría
					%select{:name => "post[subcategory_id]", class: "input_form", id: "input-post_subcategory_id", "ng-model"=>"obj.subcategories[selected]", "ng-if" => "obj.subcategories", "ng-options" => "subcategory.name for subcategory in obj.subcategories track by subcategory.id", "ng-focus" => "inputFocus('post_subcategory_id')", "ng-blur" => "inputBlur('post_subcategory_id')" }
						%option{ value: "" }
					
			%br/
			- unless @post.image.blank?
				= image_tag @post.image, class: "thumbnail", style: "width:200px;"
				%center
					= f.input :image, label: false, as: :file, input_html: { class: "form-control", placeholder: 'image', "data-buttonBefore" => false, "data-input" => false, "data-buttonText" => params[:action] == "new" ? "Subir imágen" : "Cambiar imágen" }
			- else 
				= f.input :image, label: false, as: :file, input_html: { class: "form-control", placeholder: 'image', "data-buttonBefore" => false, "data-input" => false, "data-buttonText" => params[:action] == "new" ? "Subir imágen" : "Cambiar imágen" }
			%br/
			= f.input :tag_list, label: false, input_html: { class: "form-control tagsinput", placeholder: 'tags', "data-role"=>"tagsinput" }
			%br/
			.row{ style: 'margin-bottom: 50px;'}
				.col-lg-3.col-md-3.col-sm-3
					= f.input :public, input_html: { style: "margin:0px;" }
				.col-lg-3.col-md-3.col-sm-3
					= f.input :comments_open, input_html: { style: "margin:0px;", class: 'checkstyle' }
				.col-lg-3.col-md-3.col-sm-3
					= f.input :likes_enabled, input_html: { style: "margin:0px;", class: 'checkstyle'}
				.col-lg-3.col-md-3.col-sm-3
					= f.input :shared_enabled, input_html: { style: "margin:0px;", class: 'checkstyle'}
		.panel-footer
			= f.submit "Guardar", class: "btn btn-warning pull-right"
			.clearfix

= tinymce :alternate

:javascript
	$("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput();

	$(".checkstyle").bootstrapSwitch({
		offColor: 'danger',
		onColor: 'warning',
		onText: 'Si',
		offText: 'No',
		animate: true,
		size: 'mini'
	});

	$('.filestyle').each(function() {
		var $this = $(this), options = {
			'input' : $this.attr('data-input') === 'false' ? false : true,
			'icon' : $this.attr('data-icon') === 'false' ? false : true,
			'buttonBefore' : $this.attr('data-buttonBefore') === 'true' ? true : false,
			'disabled' : $this.attr('data-disabled') === 'true' ? true : false,
			'size' : $this.attr('data-size'),
			'buttonText' : $this.attr('data-buttonText'),
			'buttonName' : $this.attr('data-buttonName'),
			'iconName' : $this.attr('data-iconName'),
			'badge' : $this.attr('data-badge') === 'false' ? false : true
		};
		$this.filestyle(options);
	});



